(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/food_menu/food_menu"],{"3ddc":function(t,o,n){"use strict";n.r(o);var e=n("532b"),a=n("df72");for(var d in a)"default"!==d&&function(t){n.d(o,t,function(){return a[t]})}(d);n("507d");var i=n("2877"),s=Object(i["a"])(a["default"],e["a"],e["b"],!1,null,null,null);o["default"]=s.exports},"507d":function(t,o,n){"use strict";var e=n("fb85"),a=n.n(e);a.a},"50fc":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=a(n("f888"));function a(t){return t&&t.__esModule?t:{default:t}}var d=function(){return n.e("components/uni-segmented-control/uni-segmented-control").then(n.bind(null,"6784"))},i={components:{uniSegmentedControl:d},data:function(){return{items:["菜谱","明日特供"],styleType:"button",activeColor:"#007aff",current:0,productList:[],foodList:[],renderImage:!1,tuser_id:t.getStorageSync("tuser_id")}},methods:{onClickItem:function(t){this.current!==t&&(this.current=t)},yuding:function(o){var n=this;t.showModal({content:"预订此餐，明日会有管家为您送上。确定要预订吗？",confirmColor:"#FF3333",confirmText:"预订",success:function(e){e.confirm?t.request({url:"https://ygjs.mfmeat.top/index.php/api/food/yuding",data:{tuser:n.tuser_id,foodId:o.Id},method:"POST",dataType:"json",success:function(o){t.showLoading({mask:!0,title:"预定中..."}),1==o.data.code?t.showModal({content:"预订成功",showCancel:!1}):2==o.data.code?t.showModal({content:"您已预订该餐品,请勿重复预定",showCancel:!1}):t.showModal({content:"预订失败",showCancel:!1})},complete:function(o){t.hideLoading()}}):e.cancel&&t.showToast({icon:"none",title:"您已取消预订"})}})},loadData:function(){var o=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";t.request({url:"https://ygjs.mfmeat.top/index.php/api/food/menu",dataType:"json",success:function(t){t.data.productList.forEach(function(t){o.productList.push(t)}),t.data.foodList.forEach(function(t){o.foodList.push(t)})}}),"refresh"===n&&(this.productList=[])},food_on:function(o){var n=this;t.request({url:"https://ygjs.mfmeat.top/index.php/api/food/foodon",data:{id:o.Id,token:(0,e.default)("foodon_pmf")},dataType:"json",method:"POST",success:function(e){1==e.data.code?(t.showToast({title:"上架成功"}),n.foodList.push(o)):"-1"==e.data.code?t.showToast({title:"该商品已上架",icon:"none"}):t.showToast({title:"上架出错",icon:"none"})},fail:function(){t.showModal({content:"网络异常！"})}})},food_off:function(o){var n=this;t.request({url:"https://ygjs.mfmeat.top/index.php/api/food/foodoff",data:{id:o.Id,token:(0,e.default)("foodoff_pmf")},dataType:"json",method:"POST",success:function(e){1==e.data.code?(t.showToast({title:"已下架"}),n.foodList.splice(n.foodList.indexOf(o),1)):t.showToast({title:"下架出错",icon:"none"})},fail:function(){t.showModal({content:"网络异常！"})}})}},onLoad:function(){var t=this;this.loadData(),setTimeout(function(){t.renderImage=!0},300)}};o.default=i}).call(this,n("6e42")["default"])},"532b":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement;t._self._c},a=[];n.d(o,"a",function(){return e}),n.d(o,"b",function(){return a})},dc74:function(t,o,n){"use strict";(function(t){n("1cbe"),n("921b");e(n("66fd"));var o=e(n("3ddc"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("6e42")["createPage"])},df72:function(t,o,n){"use strict";n.r(o);var e=n("50fc"),a=n.n(e);for(var d in e)"default"!==d&&function(t){n.d(o,t,function(){return e[t]})}(d);o["default"]=a.a},fb85:function(t,o,n){}},[["dc74","common/runtime","common/vendor"]]]);